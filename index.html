<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Character Learning</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        }
        
        .card {
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .card.flipped {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .card-back {
            transform: rotateY(180deg);
        }
        
        .word-card {
            transition: all 0.3s ease;
        }
        
        .word-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .game-tile {
            transition: all 0.3s ease;
        }
        
        .game-tile:hover {
            transform: scale(1.05);
        }
        
        .pulse-success {
            animation: pulseSuccess 0.5s;
        }
        
        @keyframes pulseSuccess {
            0% { box-shadow: 0 0 0 0 rgba(72, 187, 120, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(72, 187, 120, 0); }
            100% { box-shadow: 0 0 0 0 rgba(72, 187, 120, 0); }
        }
        
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #16a34a;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen">
    <div id="root">
        <div class="flex flex-col justify-center items-center h-screen bg-green-50 p-4">
            <div class="text-center max-w-md">
                <h1 class="text-3xl font-bold text-green-800 mb-4">Chinese Character Learning</h1>
                <div class="loading-spinner mb-4"></div>
                <p class="text-gray-600 mb-2">Loading application...</p>
                <p class="text-sm text-gray-500">If this takes too long, check your internet connection.</p>
            </div>
        </div>
    </div>

    <script type="text/babel">
        // æ£€æŸ¥Reactæ˜¯å¦åŠ è½½æˆåŠŸ
        if (typeof React === 'undefined') {
            document.getElementById('root').innerHTML = `
                <div class="flex justify-center items-center h-screen bg-red-50">
                    <div class="text-center max-w-md p-8 bg-white rounded-xl shadow-lg">
                        <h1 class="text-2xl font-bold text-red-800 mb-4">åŠ è½½é”™è¯¯</h1>
                        <p class="text-red-600 mb-4">æ— æ³•åŠ è½½Reactåº“ã€‚è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ååˆ·æ–°é¡µé¢ã€‚</p>
                        <button onclick="window.location.reload()" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
                            åˆ·æ–°é¡µé¢
                        </button>
                    </div>
                </div>
            `;
            throw new Error("React not loaded");
        }

        const { useState, useEffect, useRef } = React;

        // è¯æ±‡æ•°æ®
        const wordData = {
            'L1': [
                { chinese: 'ä¸€ä¸ª', english: 'one/a', russian: 'Ğ¾Ğ´Ğ¸Ğ½/Ğ¾Ğ´Ğ½Ğ°' },
                { chinese: 'ä¸€å¤©', english: 'one day', russian: 'Ğ¾Ğ´Ğ¸Ğ½ Ğ´ĞµĞ½ÑŒ' },
                { chinese: 'äºŒå', english: 'twenty', russian: 'Ğ´Ğ²Ğ°Ğ´Ñ†Ğ°Ñ‚ÑŒ' },
                { chinese: 'åäºŒ', english: 'twelve', russian: 'Ğ´Ğ²ĞµĞ½Ğ°Ğ´Ñ†Ğ°Ñ‚ÑŒ' },
                { chinese: 'ä¸‰å', english: 'thirty', russian: 'Ñ‚Ñ€Ğ¸Ğ´Ñ†Ğ°Ñ‚ÑŒ' },
                { chinese: 'åä¸‰', english: 'thirteen', russian: 'Ñ‚Ñ€Ğ¸Ğ½Ğ°Ğ´Ñ†Ğ°Ñ‚ÑŒ' },
                { chinese: 'åä¸€', english: 'eleven', russian: 'Ğ¾Ğ´Ğ¸Ğ½Ğ½Ğ°Ğ´Ñ†Ğ°Ñ‚ÑŒ' },
                { chinese: 'ä¸‰åäºŒ', english: 'thirty-two', russian: 'Ñ‚Ñ€Ğ¸Ğ´Ñ†Ğ°Ñ‚ÑŒ Ğ´Ğ²Ğ°' },
                { chinese: 'ä¸Šåˆ', english: 'morning', russian: 'ÑƒÑ‚Ñ€Ğ¾' },
                { chinese: 'ä¸Šè¯¾', english: 'attend class', russian: 'Ğ¿Ğ¾ÑĞµÑ‰Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ½ÑÑ‚Ğ¸Ñ' },
                { chinese: 'ä¸€åƒ', english: 'one thousand', russian: 'Ğ¾Ğ´Ğ½Ğ° Ñ‚Ñ‹ÑÑÑ‡Ğ°' },
                { chinese: 'ä¸‰åƒ', english: 'three thousand', russian: 'Ñ‚Ñ€Ğ¸ Ñ‚Ñ‹ÑÑÑ‡Ğ¸' },
                { chinese: 'ä¸‹åˆ', english: 'afternoon', russian: 'Ğ¿Ğ¾ÑĞ»Ğµ Ğ¿Ğ¾Ğ»ÑƒĞ´Ğ½Ñ' },
                { chinese: 'å­¦ç”Ÿ', english: 'student', russian: 'ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚' },
                { chinese: 'ä¸€ä¸ªå­¦ç”Ÿ', english: 'one student', russian: 'Ğ¾Ğ´Ğ¸Ğ½ ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚' },
                { chinese: 'åå…«', english: 'eighteen', russian: 'Ğ²Ğ¾ÑĞµĞ¼Ğ½Ğ°Ğ´Ñ†Ğ°Ñ‚ÑŒ' },
                { chinese: 'å…«å', english: 'eighty', russian: 'Ğ²Ğ¾ÑĞµĞ¼ÑŒĞ´ĞµÑÑÑ‚' },
                { chinese: 'ä¸€ä¸ªäºº', english: 'one person', russian: 'Ğ¾Ğ´Ğ¸Ğ½ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº' },
                { chinese: 'ä¸­å›½äºº', english: 'Chinese person', russian: 'ĞºĞ¸Ñ‚Ğ°ĞµÑ†' },
                { chinese: 'å…«ä¸ªå­¦ç”Ÿ', english: 'eight students', russian: 'Ğ²Ğ¾ÑĞµĞ¼ÑŒ ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ¾Ğ²' },
                { chinese: 'ä¸‰ä¸ªä¸­å›½äºº', english: 'three Chinese people', russian: 'Ñ‚Ñ€Ğ¸ ĞºĞ¸Ñ‚Ğ°Ğ¹Ñ†Ğ°' },
                { chinese: 'ä»Šå¤©', english: 'today', russian: 'ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ' },
                { chinese: 'æ˜å¤©', english: 'tomorrow', russian: 'Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°' },
                { chinese: 'ä¸‹è¯¾', english: 'finish class', russian: 'Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ½ÑÑ‚Ğ¸Ñ' },
                { chinese: 'å…­å', english: 'sixty', russian: 'ÑˆĞµÑÑ‚ÑŒĞ´ĞµÑÑÑ‚' },
                { chinese: 'å…­åƒ', english: 'six thousand', russian: 'ÑˆĞµÑÑ‚ÑŒ Ñ‚Ñ‹ÑÑÑ‡' },
                { chinese: 'å­¦ä¹ ', english: 'study', russian: 'ÑƒÑ‡Ğ¸Ñ‚ÑŒÑÑ' }
            ],
            'L2': [
                { chinese: 'å·¥äºº', english: 'worker', russian: 'Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğ¹' },
                { chinese: 'å·¥ä½œ', english: 'work', russian: 'Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°' },
                { chinese: 'å¹²ä»€ä¹ˆ', english: 'what to do', russian: 'Ñ‡Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ' },
                { chinese: 'åœŸè±†', english: 'potato', russian: 'ĞºĞ°Ñ€Ñ‚Ğ¾Ñ„ĞµĞ»ÑŒ' },
                { chinese: 'ç‹è€å¸ˆ', english: 'Teacher Wang', russian: 'Ğ£Ñ‡Ğ¸Ñ‚ĞµĞ»ÑŒ Ğ’Ğ°Ğ½' },
                { chinese: 'æˆ‘å§“ç‹', english: 'My surname is Wang', russian: 'ĞœĞ¾Ñ Ñ„Ğ°Ğ¼Ğ¸Ğ»Ğ¸Ñ Ğ’Ğ°Ğ½' },
                { chinese: 'ç‰›å¥¶', english: 'milk', russian: 'Ğ¼Ğ¾Ğ»Ğ¾ĞºĞ¾' },
                { chinese: 'ç‰›è‚‰', english: 'beef', russian: 'Ğ³Ğ¾Ğ²ÑĞ´Ğ¸Ğ½Ğ°' },
                { chinese: 'å·¥å‚', english: 'factory', russian: 'Ñ„Ğ°Ğ±Ñ€Ğ¸ĞºĞ°' },
                { chinese: 'å¹¿å‘Š', english: 'advertisement', russian: 'Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ°' },
                { chinese: 'å¤§å­¦', english: 'university', russian: 'ÑƒĞ½Ğ¸Ğ²ĞµÑ€ÑĞ¸Ñ‚ĞµÑ‚' },
                { chinese: 'å¤ªå¥½äº†', english: 'great', russian: 'Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾' },
                { chinese: 'å¼€é—¨', english: 'open the door', russian: 'Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ´Ğ²ĞµÑ€ÑŒ' },
                { chinese: 'å¼€å§‹', english: 'start', russian: 'Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ' },
                { chinese: 'å…³é—¨', english: 'close the door', russian: 'Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ´Ğ²ĞµÑ€ÑŒ' },
                { chinese: 'æœ¨é—¨', english: 'wooden door', russian: 'Ğ´ĞµÑ€ĞµĞ²ÑĞ½Ğ½Ğ°Ñ Ğ´Ğ²ĞµÑ€ÑŒ' },
                { chinese: 'æœ¬å­', english: 'notebook', russian: 'Ñ‚ĞµÑ‚Ñ€Ğ°Ğ´ÑŒ' },
                { chinese: 'ä¸€æœ¬ä¹¦', english: 'a book', russian: 'Ğ¾Ğ´Ğ½Ğ° ĞºĞ½Ğ¸Ğ³Ğ°' },
                { chinese: 'ä¸æ˜¯', english: 'is not', russian: 'Ğ½Ğµ ÑĞ²Ğ»ÑĞµÑ‚ÑÑ' },
                { chinese: 'ä¸å¥½', english: 'not good', russian: 'Ğ½Ğµ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾' },
                { chinese: 'ä¸­æ–‡', english: 'Chinese language', russian: 'ĞºĞ¸Ñ‚Ğ°Ğ¹ÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº' },
                { chinese: 'è‹±æ–‡', english: 'English language', russian: 'Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº' },
                { chinese: 'å¤šå°‘', english: 'how much/many', russian: 'ÑĞºĞ¾Ğ»ÑŒĞºĞ¾' },
                { chinese: 'å¾ˆå°‘', english: 'very few', russian: 'Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ¼Ğ°Ğ»Ğ¾' },
                { chinese: 'æ¥ä¸­å›½', english: 'come to China', russian: 'Ğ¿Ñ€Ğ¸ĞµÑ…Ğ°Ñ‚ÑŒ Ğ² ĞšĞ¸Ñ‚Ğ°Ğ¹' },
                { chinese: 'æ¥åŒ—äº¬', english: 'come to Beijing', russian: 'Ğ¿Ñ€Ğ¸ĞµÑ…Ğ°Ñ‚ÑŒ Ğ² ĞŸĞµĞºĞ¸Ğ½' },
                { chinese: 'èµ°è·¯', english: 'walk', russian: 'Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑˆĞºĞ¾Ğ¼' },
                { chinese: 'ä½œä¸š', english: 'homework', russian: 'Ğ´Ğ¾Ğ¼Ğ°ÑˆĞ½ĞµĞµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ' },
                { chinese: 'ç«è½¦', english: 'train', russian: 'Ğ¿Ğ¾ĞµĞ·Ğ´' },
                { chinese: 'ä¸€æ–¤', english: 'one jin (500g)', russian: 'Ğ¾Ğ´Ğ¸Ğ½ Ñ†Ğ·Ğ¸Ğ½ÑŒ (500Ğ³)' },
                { chinese: 'å…«æ–¤', english: 'eight jin', russian: 'Ğ²Ğ¾ÑĞµĞ¼ÑŒ Ñ†Ğ·Ğ¸Ğ½ĞµĞ¹' },
                { chinese: 'ä»Šå¹´', english: 'this year', russian: 'Ğ² ÑÑ‚Ğ¾Ğ¼ Ğ³Ğ¾Ğ´Ñƒ' },
                { chinese: 'æ˜å¹´', english: 'next year', russian: 'Ğ² ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¼ Ğ³Ğ¾Ğ´Ñƒ' },
                { chinese: 'å¤´å‘', english: 'hair', russian: 'Ğ²Ğ¾Ğ»Ğ¾ÑÑ‹' },
                { chinese: 'ç”µè¯å¡', english: 'phone card', russian: 'Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ°' },
                { chinese: 'ä¸€å¼ å¡', english: 'one card', russian: 'Ğ¾Ğ´Ğ½Ğ° ĞºĞ°Ñ€Ñ‚Ğ°' },
                { chinese: 'ä¸€å…±', english: 'altogether', russian: 'Ğ²ÑĞµĞ³Ğ¾' }
            ]
        };

        // è¯­éŸ³åˆæˆåŠŸèƒ½
        const speakText = (text, lang = 'zh-CN') => {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = lang;
                utterance.rate = 0.8;
                window.speechSynthesis.speak(utterance);
            }
        };

        // ä¸»åº”ç”¨ç»„ä»¶
        function App() {
            const [mode, setMode] = useState('flashcard');
            const [currentDeck, setCurrentDeck] = useState('L1');
            const [progress, setProgress] = useState({});
            
            // ä»localStorageåŠ è½½è¿›åº¦
            useEffect(() => {
                try {
                    const savedProgress = localStorage.getItem('chineseLearningProgress');
                    if (savedProgress) {
                        setProgress(JSON.parse(savedProgress));
                    }
                } catch (error) {
                    console.error("Error loading progress:", error);
                }
            }, []);
            
            // ä¿å­˜è¿›åº¦åˆ°localStorage
            useEffect(() => {
                try {
                    localStorage.setItem('chineseLearningProgress', JSON.stringify(progress));
                } catch (error) {
                    console.error("Error saving progress:", error);
                }
            }, [progress]);
            
            // æ›´æ–°å•è¯è¿›åº¦
            const updateProgress = (word, mastery) => {
                setProgress(prev => ({
                    ...prev,
                    [word]: mastery
                }));
            };
            
            // é‡ç½®è¿›åº¦
            const resetProgress = () => {
                if (window.confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰å­¦ä¹ è¿›åº¦å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚')) {
                    setProgress({});
                }
            };
            
            // è®¡ç®—ç»Ÿè®¡ä¿¡æ¯
            const stats = {
                total: wordData[currentDeck].length,
                mastered: Object.values(progress).filter(level => level >= 4).length,
                learning: Object.values(progress).filter(level => level > 0 && level < 4).length,
                new: Object.values(progress).filter(level => level === 0 || !level).length
            };
            
            return (
                <div className="min-h-screen">
                    {/* é¡¶éƒ¨å¯¼èˆª */}
                    <header className="bg-green-600 text-white p-4 shadow-md">
                        <div className="container mx-auto flex flex-col md:flex-row justify-between items-center">
                            <h1 className="text-2xl font-bold mb-2 md:mb-0">æ±‰è¯­è¯æ±‡å­¦ä¹ </h1>
                            <div className="flex items-center space-x-4">
                                <div className="flex items-center">
                                    <span className="mr-2">è¯åº“:</span>
                                    <select 
                                        value={currentDeck} 
                                        onChange={(e) => setCurrentDeck(e.target.value)}
                                        className="bg-green-700 text-white px-2 py-1 rounded"
                                    >
                                        <option value="L1">L1 åŸºç¡€è¯æ±‡</option>
                                        <option value="L2">L2 æ‰©å±•è¯æ±‡</option>
                                    </select>
                                </div>
                                
                                <div className="flex items-center">
                                    <div className="mr-4 text-center">
                                        <div className="text-lg font-bold">{stats.mastered}/{stats.total}</div>
                                        <div className="text-xs">å·²æŒæ¡</div>
                                    </div>
                                    <div className="w-24 bg-green-200 rounded-full h-2.5">
                                        <div 
                                            className="bg-green-700 h-2.5 rounded-full transition-all duration-500" 
                                            style={{ width: `${Math.round((stats.mastered / stats.total) * 100)}%` }}
                                        ></div>
                                    </div>
                                    <span className="ml-2 text-sm">{Math.round((stats.mastered / stats.total) * 100)}%</span>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    {/* æ¨¡å¼é€‰æ‹© */}
                    <nav className="bg-white shadow-sm py-3">
                        <div className="container mx-auto flex flex-wrap justify-center">
                            <button
                                onClick={() => setMode('flashcard')}
                                className={`mx-2 my-1 px-4 py-2 rounded-lg transition-colors ${
                                    mode === 'flashcard' 
                                        ? 'bg-green-600 text-white' 
                                        : 'bg-green-100 text-green-800 hover:bg-green-200'
                                }`}
                            >
                                å•è¯å¡
                            </button>
                            <button
                                onClick={() => setMode('quiz')}
                                className={`mx-2 my-1 px-4 py-2 rounded-lg transition-colors ${
                                    mode === 'quiz' 
                                        ? 'bg-green-600 text-white' 
                                        : 'bg-green-100 text-green-800 hover:bg-green-200'
                                }`}
                            >
                                é€‰æ‹©é¢˜
                            </button>
                            <button
                                onClick={() => setMode('typeit')}
                                className={`mx-2 my-1 px-4 py-2 rounded-lg transition-colors ${
                                    mode === 'typeit' 
                                        ? 'bg-green-600 text-white' 
                                        : 'bg-green-100 text-green-800 hover:bg-green-200'
                                }`}
                            >
                                æ‰“å­—ç»ƒä¹ 
                            </button>
                            <button
                                onClick={() => setMode('minigame')}
                                className={`mx-2 my-1 px-4 py-2 rounded-lg transition-colors ${
                                    mode === 'minigame' 
                                        ? 'bg-green-600 text-white' 
                                        : 'bg-green-100 text-green-800 hover:bg-green-200'
                                }`}
                            >
                                é…å¯¹æ¸¸æˆ
                            </button>
                            <button
                                onClick={() => setMode('wordlist')}
                                className={`mx-2 my-1 px-4 py-2 rounded-lg transition-colors ${
                                    mode === 'wordlist' 
                                        ? 'bg-green-600 text-white' 
                                        : 'bg-green-100 text-green-800 hover:bg-green-200'
                                }`}
                            >
                                è¯æ±‡è¡¨
                            </button>
                        </div>
                    </nav>
                    
                    {/* ä¸»è¦å†…å®¹åŒºåŸŸ */}
                    <main className="container mx-auto p-4">
                        {mode === 'flashcard' && (
                            <FlashcardMode 
                                deck={wordData[currentDeck]} 
                                progress={progress} 
                                updateProgress={updateProgress} 
                            />
                        )}
                        
                        {mode === 'quiz' && (
                            <QuizMode 
                                deck={wordData[currentDeck]} 
                                progress={progress} 
                                updateProgress={updateProgress} 
                            />
                        )}
                        
                        {mode === 'typeit' && (
                            <TypeItMode 
                                deck={wordData[currentDeck]} 
                                progress={progress} 
                                updateProgress={updateProgress} 
                            />
                        )}
                        
                        {mode === 'minigame' && (
                            <MiniGameMode 
                                deck={wordData[currentDeck]} 
                                progress={progress} 
                                updateProgress={updateProgress} 
                            />
                        )}
                        
                        {mode === 'wordlist' && (
                            <WordListMode 
                                deck={wordData[currentDeck]} 
                                progress={progress} 
                            />
                        )}
                    </main>
                    
                    {/* é¡µè„š */}
                    <footer className="bg-green-800 text-white p-4 mt-8">
                        <div className="container mx-auto flex flex-col md:flex-row justify-between items-center">
                            <p>æ±‰è¯­å­¦ä¹ åº”ç”¨ &copy; {new Date().getFullYear()}</p>
                            <button 
                                onClick={resetProgress}
                                className="mt-2 md:mt-0 px-4 py-2 bg-red-500 hover:bg-red-600 rounded-lg transition-colors"
                            >
                                é‡ç½®è¿›åº¦
                            </button>
                        </div>
                    </footer>
                </div>
            );
        }

        // å•è¯å¡æ¨¡å¼ç»„ä»¶
        function FlashcardMode({ deck, progress, updateProgress }) {
            const [currentIndex, setCurrentIndex] = useState(0);
            const [isFlipped, setIsFlipped] = useState(false);
            
            // é”®ç›˜å¿«æ·é”®
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.code === 'Space') {
                        e.preventDefault();
                        setIsFlipped(!isFlipped);
                    } else if (e.code === 'KeyK' && isFlipped) {
                        // è®¤è¯†
                        updateProgress(deck[currentIndex].chinese, Math.min(5, (progress[deck[currentIndex].chinese] || 0) + 1));
                        nextCard();
                    } else if (e.code === 'KeyA' && isFlipped) {
                        // ä¸è®¤è¯†
                        updateProgress(deck[currentIndex].chinese, Math.max(0, (progress[deck[currentIndex].chinese] || 0) - 1));
                        nextCard();
                    } else if (e.code === 'KeyV') {
                        // å‘éŸ³
                        if (isFlipped) {
                            speakText(deck[currentIndex].english, 'en-US');
                        } else {
                            speakText(deck[currentIndex].chinese);
                        }
                    }
                };
                
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [currentIndex, isFlipped, deck, progress, updateProgress]);
            
            const nextCard = () => {
                setIsFlipped(false);
                setCurrentIndex((prevIndex) => (prevIndex + 1) % deck.length);
            };
            
            const prevCard = () => {
                setIsFlipped(false);
                setCurrentIndex((prevIndex) => (prevIndex - 1 + deck.length) % deck.length);
            };
            
            const masteryLevel = progress[deck[currentIndex]?.chinese] || 0;
            
            return (
                <div className="max-w-2xl mx-auto">
                    <div className="mb-4 flex justify-between items-center">
                        <button 
                            onClick={prevCard}
                            className="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"
                        >
                            ä¸Šä¸€ä¸ª
                        </button>
                        <div className="text-center">
                            <span className="font-bold">{currentIndex + 1}</span> / {deck.length}
                            <div className="flex justify-center mt-1">
                                {[1, 2, 3, 4, 5].map((level) => (
                                    <div 
                                        key={level}
                                        className={`w-4 h-4 mx-1 rounded-full ${
                                            level <= masteryLevel ? 'bg-green-500' : 'bg-gray-300'
                                        }`}
                                    ></div>
                                ))}
                            </div>
                        </div>
                        <button 
                            onClick={nextCard}
                            className="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"
                        >
                            ä¸‹ä¸€ä¸ª
                        </button>
                    </div>
                    
                    <div 
                        className={`card relative w-full h-64 cursor-pointer ${isFlipped ? 'flipped' : ''}`}
                        onClick={() => setIsFlipped(!isFlipped)}
                    >
                        <div className="card-front bg-white rounded-xl shadow-lg flex flex-col justify-center items-center p-6">
                            <div className="text-4xl font-bold text-green-800 mb-4">
                                {deck[currentIndex]?.chinese}
                            </div>
                            <button 
                                onClick={(e) => {
                                    e.stopPropagation();
                                    speakText(deck[currentIndex].chinese);
                                }}
                                className="px-4 py-2 bg-green-100 text-green-800 rounded-lg hover:bg-green-200 transition-colors"
                            >
                                ğŸ”Š å‘éŸ³
                            </button>
                            <div className="mt-4 text-sm text-gray-500">
                                ç‚¹å‡»æˆ–æŒ‰ç©ºæ ¼é”®ç¿»è½¬
                            </div>
                        </div>
                        
                        <div className="card-back bg-green-100 rounded-xl shadow-lg flex flex-col justify-center items-center p-6">
                            <div className="text-2xl font-bold text-green-800 mb-2">
                                {deck[currentIndex]?.english}
                            </div>
                            <div className="text-lg text-gray-700 mb-4">
                                {deck[currentIndex]?.russian}
                            </div>
                            <div className="flex space-x-2">
                                <button 
                                    onClick={(e) => {
                                        e.stopPropagation();
                                        speakText(deck[currentIndex].english, 'en-US');
                                    }}
                                    className="px-3 py-1 bg-white text-green-800 rounded-lg hover:bg-green-200 transition-colors"
                                >
                                    ğŸ”Š è‹±æ–‡
                                </button>
                                <button 
                                    onClick={(e) => {
                                        e.stopPropagation();
                                        updateProgress(deck[currentIndex].chinese, Math.min(5, (progress[deck[currentIndex].chinese] || 0) + 1));
                                        nextCard();
                                    }}
                                    className="px-3 py-1 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"
                                >
                                    è®¤è¯† (K)
                                </button>
                                <button 
                                    onClick={(e) => {
                                        e.stopPropagation();
                                        updateProgress(deck[currentIndex].chinese, Math.max(0, (progress[deck[currentIndex].chinese] || 0) - 1));
                                        nextCard();
                                    }}
                                    className="px-3 py-1 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors"
                                >
                                    ä¸è®¤è¯† (A)
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div className="mt-6 text-center text-sm text-gray-600">
                        <p>é”®ç›˜å¿«æ·é”®: ç©ºæ ¼ = ç¿»è½¬, K = è®¤è¯†, A = ä¸è®¤è¯†, V = å‘éŸ³</p>
                    </div>
                </div>
            );
        }

        // é€‰æ‹©é¢˜æ¨¡å¼ç»„ä»¶
        function QuizMode({ deck, progress, updateProgress }) {
            const [currentIndex, setCurrentIndex] = useState(0);
            const [options, setOptions] = useState([]);
            const [selectedOption, setSelectedOption] = useState(null);
            const [showResult, setShowResult] = useState(false);
            const [score, setScore] = useState(0);
            
            // åˆå§‹åŒ–æµ‹éªŒ
            useEffect(() => {
                if (deck.length > 0) {
                    generateOptions(currentIndex);
                }
            }, [deck, currentIndex]);
            
            const generateOptions = (index) => {
                if (deck.length < 4) return;
                
                const correctAnswer = deck[index].chinese;
                const wrongAnswers = deck
                    .filter((_, i) => i !== index)
                    .sort(() => 0.5 - Math.random())
                    .slice(0, 3)
                    .map(item => item.chinese);
                
                const allOptions = [correctAnswer, ...wrongAnswers].sort(() => 0.5 - Math.random());
                setOptions(allOptions);
            };
            
            const handleAnswer = (option) => {
                if (showResult) return;
                
                setSelectedOption(option);
                setShowResult(true);
                
                const isCorrect = option === deck[currentIndex].chinese;
                if (isCorrect) {
                    setScore(score + 1);
                    updateProgress(deck[currentIndex].chinese, Math.min(5, (progress[deck[currentIndex].chinese] || 0) + 1));
                } else {
                    updateProgress(deck[currentIndex].chinese, Math.max(0, (progress[deck[currentIndex].chinese] || 0) - 1));
                }
                
                // 1.5ç§’åè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€é¢˜
                setTimeout(() => {
                    nextQuestion();
                }, 1500);
            };
            
            const nextQuestion = () => {
                setSelectedOption(null);
                setShowResult(false);
                setCurrentIndex((prevIndex) => (prevIndex + 1) % deck.length);
            };
            
            if (deck.length < 4) {
                return (
                    <div className="text-center p-8 bg-white rounded-xl shadow-lg">
                        <p className="text-lg">æ­¤è¯åº“ä¸­çš„å•è¯ä¸è¶³ï¼Œæ— æ³•è¿›è¡Œæµ‹éªŒã€‚è‡³å°‘éœ€è¦4ä¸ªå•è¯ã€‚</p>
                    </div>
                );
            }
            
            return (
                <div className="max-w-2xl mx-auto">
                    <div className="mb-6 text-center">
                        <h2 className="text-2xl font-bold text-green-800 mb-2">é€‰æ‹©é¢˜æµ‹éªŒ</h2>
                        <div className="flex justify-between items-center bg-white p-4 rounded-lg shadow">
                            <div>
                                é¢˜ç›®: <span className="font-bold">{currentIndex + 1}</span> / {deck.length}
                            </div>
                            <div>
                                å¾—åˆ†: <span className="font-bold">{score}</span> / {deck.length}
                            </div>
                        </div>
                    </div>
                    
                    <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <div className="text-center mb-6">
                            <div className="text-lg text-gray-700 mb-2">
                                ä»¥ä¸‹è‹±æ–‡å¯¹åº”çš„ä¸­æ–‡æ˜¯:
                            </div>
                            <div className="text-2xl font-bold text-green-800">
                                {deck[currentIndex]?.english}
                            </div>
                            <div className="text-lg text-gray-600 mt-1">
                                {deck[currentIndex]?.russian}
                            </div>
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {options.map((option, index) => {
                                const isCorrect = option === deck[currentIndex].chinese;
                                const isSelected = selectedOption === option;
                                let buttonClass = "p-4 text-lg rounded-lg transition-colors ";
                                
                                if (showResult) {
                                    if (isCorrect) {
                                        buttonClass += "bg-green-500 text-white pulse-success";
                                    } else if (isSelected) {
                                        buttonClass += "bg-red-500 text-white";
                                    } else {
                                        buttonClass += "bg-gray-200 text-gray-700";
                                    }
                                } else {
                                    buttonClass += "bg-green-100 text-green-800 hover:bg-green-200";
                                }
                                
                                return (
                                    <button
                                        key={index}
                                        className={buttonClass}
                                        onClick={() => handleAnswer(option)}
                                        disabled={showResult}
                                    >
                                        {option}
                                    </button>
                                );
                            })}
                        </div>
                    </div>
                    
                    {showResult && (
                        <div className="text-center">
                            <button 
                                onClick={nextQuestion}
                                className="px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"
                            >
                                ä¸‹ä¸€é¢˜
                            </button>
                        </div>
                    )}
                </div>
            );
        }

        // æ‰“å­—ç»ƒä¹ æ¨¡å¼ç»„ä»¶
        function TypeItMode({ deck, progress, updateProgress }) {
            const [currentIndex, setCurrentIndex] = useState(0);
            const [userInput, setUserInput] = useState('');
            const [showResult, setShowResult] = useState(false);
            const [isCorrect, setIsCorrect] = useState(false);
            const inputRef = useRef(null);
            
            useEffect(() => {
                if (inputRef.current) {
                    inputRef.current.focus();
                }
            }, [currentIndex]);
            
            const checkAnswer = () => {
                if (userInput.trim() === '') return;
                
                const correct = userInput.trim() === deck[currentIndex].chinese;
                setIsCorrect(correct);
                setShowResult(true);
                
                if (correct) {
                    updateProgress(deck[currentIndex].chinese, Math.min(5, (progress[deck[currentIndex].chinese] || 0) + 1));
                } else {
                    updateProgress(deck[currentIndex].chinese, Math.max(0, (progress[deck[currentIndex].chinese] || 0) - 1));
                }
            };
            
            const nextWord = () => {
                setUserInput('');
                setShowResult(false);
                setCurrentIndex((prevIndex) => (prevIndex + 1) % deck.length);
            };
            
            const handleKeyPress = (e) => {
                if (e.key === 'Enter') {
                    if (showResult) {
                        nextWord();
                    } else {
                        checkAnswer();
                    }
                }
            };
            
            return (
                <div className="max-w-2xl mx-auto">
                    <div className="mb-6 text-center">
                        <h2 className="text-2xl font-bold text-green-800 mb-2">æ‰“å­—ç»ƒä¹ </h2>
                        <div className="bg-white p-4 rounded-lg shadow inline-block">
                            é¢˜ç›®: <span className="font-bold">{currentIndex + 1}</span> / {deck.length}
                        </div>
                    </div>
                    
                    <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <div className="text-center mb-6">
                            <div className="text-lg text-gray-700 mb-2">
                                è¾“å…¥ä»¥ä¸‹å†…å®¹çš„ä¸­æ–‡:
                            </div>
                            <div className="text-2xl font-bold text-green-800">
                                {deck[currentIndex]?.english}
                            </div>
                            <div className="text-lg text-gray-600 mt-1">
                                {deck[currentIndex]?.russian}
                            </div>
                        </div>
                        
                        <div className="flex flex-col items-center">
                            <input
                                ref={inputRef}
                                type="text"
                                value={userInput}
                                onChange={(e) => setUserInput(e.target.value)}
                                onKeyPress={handleKeyPress}
                                className="w-full max-w-md p-4 text-xl border-2 border-green-300 rounded-lg focus:outline-none focus:border-green-500 text-center"
                                placeholder="åœ¨æ­¤è¾“å…¥ä¸­æ–‡..."
                                disabled={showResult}
                            />
                            
                            {showResult && (
                                <div className={`mt-4 p-4 rounded-lg ${isCorrect ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>
                                    {isCorrect ? (
                                        <div className="text-center">
                                            <div className="text-2xl font-bold">æ­£ç¡®!</div>
                                            <div className="text-lg mt-2">{deck[currentIndex]?.chinese}</div>
                                        </div>
                                    ) : (
                                        <div className="text-center">
                                            <div className="text-xl font-bold">é”™è¯¯</div>
                                            <div className="mt-2">
                                                æ­£ç¡®ç­”æ¡ˆ: <span className="font-bold text-lg">{deck[currentIndex]?.chinese}</span>
                                            </div>
                                            <div className="mt-2">ä½ çš„ç­”æ¡ˆ: {userInput}</div>
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    </div>
                    
                    <div className="text-center">
                        {!showResult ? (
                            <button 
                                onClick={checkAnswer}
                                className="px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"
                            >
                                æ£€æŸ¥ç­”æ¡ˆ
                            </button>
                        ) : (
                            <button 
                                onClick={nextWord}
                                className="px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"
                            >
                                ä¸‹ä¸€ä¸ªå•è¯
                            </button>
                        )}
                    </div>
                    
                    <div className="mt-6 text-center text-sm text-gray-600">
                        <p>æŒ‰Enteré”®æ£€æŸ¥ç­”æ¡ˆæˆ–è¿›å…¥ä¸‹ä¸€ä¸ªå•è¯</p>
                    </div>
                </div>
            );
        }

        // é…å¯¹æ¸¸æˆæ¨¡å¼ç»„ä»¶
        function MiniGameMode({ deck, progress, updateProgress }) {
            const [gameState, setGameState] = useState('setup');
            const [pairs, setPairs] = useState([]);
            const [selectedTile, setSelectedTile] = useState(null);
            const [matchedPairs, setMatchedPairs] = useState([]);
            const [moves, setMoves] = useState(0);
            
            // åˆå§‹åŒ–æ¸¸æˆ
            useEffect(() => {
                if (gameState === 'setup' && deck.length >= 4) {
                    startGame();
                }
            }, [deck, gameState]);
            
            const startGame = () => {
                // é€‰æ‹©8ä¸ªéšæœºå•è¯ï¼ˆ4å¯¹ï¼‰
                const selectedWords = [...deck]
                    .sort(() => 0.5 - Math.random())
                    .slice(0, 4);
                
                // åˆ›å»ºé…å¯¹ï¼šä¸­æ–‡å’Œè‹±æ–‡
                const newPairs = [];
                selectedWords.forEach(word => {
                    newPairs.push(
                        { id: `${word.chinese}-ch`, content: word.chinese, type: 'chinese', pairId: word.chinese },
                        { id: `${word.chinese}-en`, content: word.english, type: 'english', pairId: word.chinese }
                    );
                });
                
                // æ´—ç‰Œ
                setPairs(newPairs.sort(() => 0.5 - Math.random()));
                setMatchedPairs([]);
                setMoves(0);
                setGameState('playing');
            };
            
            const handleTileClick = (tile) => {
                if (selectedTile === tile || matchedPairs.includes(tile.pairId)) {
                    return;
                }
                
                if (!selectedTile) {
                    setSelectedTile(tile);
                    return;
                }
                
                setMoves(moves + 1);
                
                // æ£€æŸ¥æ˜¯å¦åŒ¹é…
                if (selectedTile.pairId === tile.pairId) {
                    // åŒ¹é…æˆåŠŸ
                    setMatchedPairs([...matchedPairs, tile.pairId]);
                    setSelectedTile(null);
                    
                    // æ›´æ–°è¿›åº¦
                    updateProgress(tile.pairId, Math.min(5, (progress[tile.pairId] || 0) + 1));
                    
                    // å‘éŸ³
                    speakText(tile.pairId);
                    
                    // æ£€æŸ¥æ¸¸æˆæ˜¯å¦å®Œæˆ
                    if (matchedPairs.length + 1 === 4) {
                        setTimeout(() => {
                            setGameState('result');
                        }, 1000);
                    }
                } else {
                    // ä¸åŒ¹é…
                    setTimeout(() => {
                        setSelectedTile(null);
                    }, 1000);
                }
            };
            
            if (deck.length < 4) {
                return (
                    <div className="text-center p-8 bg-white rounded-xl shadow-lg">
                        <p className="text-lg">æ­¤è¯åº“ä¸­çš„å•è¯ä¸è¶³ï¼Œæ— æ³•è¿›è¡Œæ¸¸æˆã€‚è‡³å°‘éœ€è¦4ä¸ªå•è¯ã€‚</p>
                    </div>
                );
            }
            
            return (
                <div className="max-w-4xl mx-auto">
                    <div className="mb-6 text-center">
                        <h2 className="text-2xl font-bold text-green-800 mb-2">é…å¯¹æ¸¸æˆ</h2>
                        <p className="text-gray-700">å°†ä¸­æ–‡è¯æ±‡ä¸å¯¹åº”çš„è‹±æ–‡ç¿»è¯‘é…å¯¹</p>
                        
                        {gameState === 'playing' && (
                            <div className="mt-4 bg-white p-4 rounded-lg shadow inline-block">
                                ç§»åŠ¨æ¬¡æ•°: <span className="font-bold">{moves}</span> | 
                                å·²åŒ¹é…: <span className="font-bold">{matchedPairs.length}</span> / 4
                            </div>
                        )}
                    </div>
                    
                    {gameState === 'setup' && (
                        <div className="text-center">
                            <button 
                                onClick={startGame}
                                className="px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-xl"
                            >
                                å¼€å§‹æ¸¸æˆ
                            </button>
                        </div>
                    )}
                    
                    {gameState === 'playing' && (
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                            {pairs.map(tile => {
                                const isSelected = selectedTile?.id === tile.id;
                                const isMatched = matchedPairs.includes(tile.pairId);
                                
                                let tileClass = "game-tile p-4 rounded-lg shadow-lg flex items-center justify-center text-center min-h-24 cursor-pointer transition-all ";
                                
                                if (isMatched) {
                                    tileClass += "bg-green-500 text-white transform scale-95";
                                } else if (isSelected) {
                                    tileClass += tile.type === 'chinese' 
                                        ? "bg-blue-500 text-white" 
                                        : "bg-yellow-500 text-white";
                                } else {
                                    tileClass += "bg-white text-gray-800 hover:bg-gray-100";
                                }
                                
                                return (
                                    <div
                                        key={tile.id}
                                        className={tileClass}
                                        onClick={() => handleTileClick(tile)}
                                    >
                                        <div className="font-bold text-lg">
                                            {tile.content}
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    )}
                    
                    {gameState === 'result' && (
                        <div className="text-center bg-white rounded-xl shadow-lg p-8">
                            <div className="text-3xl font-bold text-green-800 mb-4">æ¸¸æˆå®Œæˆ!</div>
                            <div className="text-xl mb-6">
                                ä½ åœ¨ <span className="font-bold">{moves}</span> æ¬¡ç§»åŠ¨ä¸­åŒ¹é…äº†æ‰€æœ‰å•è¯!
                            </div>
                            <button 
                                onClick={() => setGameState('setup')}
                                className="px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-xl"
                            >
                                å†ç©ä¸€æ¬¡
                            </button>
                        </div>
                    )}
                </div>
            );
        }

        // è¯æ±‡è¡¨æ¨¡å¼ç»„ä»¶
        function WordListMode({ deck, progress }) {
            const [filter, setFilter] = useState('all');
            
            const filteredDeck = deck.filter(word => {
                const mastery = progress[word.chinese] || 0;
                
                if (filter === 'all') return true;
                if (filter === 'mastered') return mastery >= 4;
                if (filter === 'learning') return mastery > 0 && mastery < 4;
                if (filter === 'new') return mastery === 0;
                
                return true;
            });
            
            return (
                <div className="max-w-6xl mx-auto">
                    <div className="mb-6 flex flex-col md:flex-row justify-between items-center">
                        <h2 className="text-2xl font-bold text-green-800 mb-4 md:mb-0">è¯æ±‡è¡¨</h2>
                        
                        <div className="flex space-x-2">
                            <button
                                onClick={() => setFilter('all')}
                                className={`px-3 py-1 rounded-lg transition-colors ${
                                    filter === 'all' 
                                        ? 'bg-green-600 text-white' 
                                        : 'bg-green-100 text-green-800 hover:bg-green-200'
                                }`}
                            >
                                å…¨éƒ¨å•è¯
                            </button>
                            <button
                                onClick={() => setFilter('new')}
                                className={`px-3 py-1 rounded-lg transition-colors ${
                                    filter === 'new' 
                                        ? 'bg-green-600 text-white' 
                                        : 'bg-green-100 text-green-800 hover:bg-green-200'
                                }`}
                            >
                                æ–°å•è¯
                            </button>
                            <button
                                onClick={() => setFilter('learning')}
                                className={`px-3 py-1 rounded-lg transition-colors ${
                                    filter === 'learning' 
                                        ? 'bg-green-600 text-white' 
                                        : 'bg-green-100 text-green-800 hover:bg-green-200'
                                }`}
                            >
                                å­¦ä¹ ä¸­
                            </button>
                            <button
                                onClick={() => setFilter('mastered')}
                                className={`px-3 py-1 rounded-lg transition-colors ${
                                    filter === 'mastered' 
                                        ? 'bg-green-600 text-white' 
                                        : 'bg-green-100 text-green-800 hover:bg-green-200'
                                }`}
                            >
                                å·²æŒæ¡
                            </button>
                        </div>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        {filteredDeck.map((word, index) => {
                            const mastery = progress[word.chinese] || 0;
                            
                            let bgColor = 'bg-white';
                            if (mastery >= 4) bgColor = 'bg-green-100';
                            else if (mastery > 0) bgColor = 'bg-yellow-100';
                            
                            return (
                                <div 
                                    key={index}
                                    className={`word-card ${bgColor} rounded-xl shadow p-4 flex flex-col`}
                                >
                                    <div className="flex justify-between items-start mb-2">
                                        <div 
                                            className="text-2xl font-bold text-green-800 cursor-pointer"
                                            onClick={() => speakText(word.chinese)}
                                        >
                                            {word.chinese}
                                        </div>
                                        <div className="flex">
                                            {[1, 2, 3, 4, 5].map(level => (
                                                <div 
                                                    key={level}
                                                    className={`w-3 h-3 mx-0.5 rounded-full ${
                                                        level <= mastery ? 'bg-green-500' : 'bg-gray-300'
                                                    }`}
                                                ></div>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    <div className="text-lg text-gray-700 mb-1">
                                        {word.english}
                                    </div>
                                    
                                    <div className="text-gray-600">
                                        {word.russian}
                                    </div>
                                    
                                    <div className="mt-2 flex space-x-2">
                                        <button 
                                            onClick={() => speakText(word.chinese)}
                                            className="px-2 py-1 bg-green-200 text-green-800 rounded text-sm hover:bg-green-300 transition-colors"
                                        >
                                            ğŸ”Š ä¸­æ–‡
                                        </button>
                                        <button 
                                            onClick={() => speakText(word.english, 'en-US')}
                                            className="px-2 py-1 bg-blue-200 text-blue-800 rounded text-sm hover:bg-blue-300 transition-colors"
                                        >
                                            ğŸ”Š è‹±æ–‡
                                        </button>
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                    
                    {filteredDeck.length === 0 && (
                        <div className="text-center p-8 bg-white rounded-xl shadow-lg">
                            <p className="text-lg">æ²¡æœ‰ç¬¦åˆç­›é€‰æ¡ä»¶çš„å•è¯ã€‚</p>
                        </div>
                    )}
                </div>
            );
        }

        // æ¸²æŸ“åº”ç”¨
        try {
            ReactDOM.render(React.createElement(App), document.getElementById('root'));
        } catch (error) {
            console.error("Application error:", error);
            document.getElementById('root').innerHTML = `
                <div class="flex justify-center items-center h-screen bg-red-50">
                    <div class="text-center max-w-md p-8 bg-white rounded-xl shadow-lg">
                        <h1 class="text-2xl font-bold text-red-800 mb-4">åº”ç”¨ç¨‹åºé”™è¯¯</h1>
                        <p class="text-red-600 mb-4">${error.message}</p>
                        <p class="text-sm text-gray-500 mb-4">è¯·æ£€æŸ¥æ§åˆ¶å°è·å–è¯¦ç»†ä¿¡æ¯ã€‚</p>
                        <button onclick="window.location.reload()" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
                            åˆ·æ–°é¡µé¢
                        </button>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>
